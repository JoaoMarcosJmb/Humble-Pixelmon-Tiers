<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<title>Allowlist Viewer</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
:root {
  --cor-dourado: #ffd700;
  --cor-fundo: rgba(30,30,30,0.95);
  --cor-card: #2E2D2D;
  --cor-texto: #ffffff;
}

body {
  font-family: "Segoe UI", Arial, sans-serif;
  background: linear-gradient(135deg, rgba(30,30,30,0.95), rgba(50,40,20,0.95)),
              url("https://i.imgur.com/vATNRmF.png") no-repeat center center fixed;
  background-size: cover;
  margin: 0;
  padding: 0;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  color: var(--cor-texto);
}

/* ---------- HEADER ---------- */
header {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px 30px;
  background: rgba(20,20,20,0.95);
  border-bottom: 2px solid var(--cor-dourado);
  z-index: 1000;
  box-sizing: border-box;
}

header h1 {
  font-size: 2rem;
  margin: 0;
  display: flex;
  align-items: center;
  gap: 12px;
  color: var(--cor-dourado);
}

header h1 img { height: 50px; }

/* ---------- MENU HAMBURGUER ---------- */
.menu-toggle {
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  width: 30px;
  height: 22px;
  cursor: pointer;
  z-index: 1100;
}

.menu-toggle span {
  display: block;
  height: 4px;
  background: var(--cor-texto);
  border-radius: 4px;
  transition: 0.3s;
}

.menu-toggle.active span:nth-child(1) {
  transform: rotate(45deg) translate(5px, 5px);
}
.menu-toggle.active span:nth-child(2) {
  opacity: 0;
}
.menu-toggle.active span:nth-child(3) {
  transform: rotate(-45deg) translate(5px, -5px);
}

/* ---------- MENU DROPDOWN ---------- */
nav {
  position: absolute;
  top: 65px;
  right: 10px;
  background: rgba(30, 25, 20, 0.95);
  border: 1px solid var(--cor-dourado);
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.6);
  display: none;
  flex-direction: column;
  padding: 15px;
  gap: 12px;
  z-index: 1200;
  max-width: calc(100% - 20px);
  overflow-wrap: break-word;
}

nav.active {
  display: flex;
}

nav a {
  color: var(--cor-dourado);
  text-decoration: none;
  font-size: 1rem;
  transition: color 0.2s;
}

nav a:hover {
  color: var(--cor-texto);
}

/* ---------- CONTAINER / CARDS ---------- */
.container {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 20px;
  width: 90%;
  max-width: 1200px;
  padding: 120px 30px 60px;
  box-sizing: border-box;
  justify-items: center;
}

@media(max-width:1024px){ .container{ grid-template-columns: repeat(3,1fr); } }
@media(max-width:768px){ .container{ grid-template-columns: repeat(2,1fr); } }
@media(max-width:480px){ .container{ grid-template-columns: repeat(1,1fr); } }

.card {
  background: var(--cor-card);
  border-radius: 12px;
  padding: 14px;
  display: flex;
  align-items: center;
  gap: 12px;
  text-decoration: none;
  color: var(--cor-texto);
  box-shadow: 0 6px 14px rgba(0,0,0,0.5);
  transition: transform .2s, box-shadow .2s;
  width: 100%;
  max-width: 260px;
}

.card:hover {
  transform: translateY(-6px);
  box-shadow: 0 12px 24px rgba(0,0,0,0.7);
}

.card img {
  width: 84px;
  height: 84px;
  object-fit: contain;
  border-radius: 8px;
  background-color: var(--cor-card);
  flex: 0 0 84px;
}

.card-text h2 {
  margin: 0;
  font-size: 1.15rem;
  text-transform: capitalize;
  color: var(--cor-texto);
}

/* RESPONSIVO */
@media (max-width: 500px){
  header h1{ font-size: 1.3rem; }
  .container{ padding: 100px 15px 50px; gap: 15px; }
  nav{ right:5px; left:5px; }
}
</style>
</head>
<body>

<header>
  <h1>
    <img src="https://i.imgur.com/XOEcuO8.png" alt="Mascote">
    Escolha sua Tier
  </h1>

  <!-- MENU HAMBURGUER -->
  <div class="menu-toggle" id="menuBtn">
    <span></span>
    <span></span>
    <span></span>
  </div>

  <!-- MENU DROPDOWN -->
  <nav id="dropdownMenu">
    <a href="https://www.humblepixelmon.com.br">üåê Site Oficial</a>
    <a href="viewer.html?file=allowlist_Monomon.json">‚öîÔ∏è Monomon</a>
    <a href="viewer.html?file=allowlist_Starters.json">üî• Starters</a>
    <a href="notas.html">üìù Notas de Atualiza√ß√£o</a>
    <a href="https://discord.gg/whV6hbVRvk">üí¨ Discord</a>
  </nav>
</header>

<div class="container" id="pokemonContainer"></div>

<script>
const menuToggle = document.getElementById("menuBtn");
const dropdown = document.getElementById("dropdownMenu");

menuToggle.addEventListener("click", () => {
  menuToggle.classList.toggle("active");
  dropdown.classList.toggle("active");
});

// CARDS DIN√ÇMICOS
function prettifyKey(key){
  return key.replace(/-/g,' ').split(' ').map(w=>w? w[0].toUpperCase()+w.slice(1):'').join(' ');
}
function normalizeName(key){
  let name = key.toLowerCase().replace(/\s+/g,'-');
  const keepForms = ["lycanroc-dusk","lycanroc-midnight","landorus-therian","thundurus-therian","tornadus-therian","urshifu-rapid-strike","urshifu-single-strike"];
  if(keepForms.includes(name)) return name;
  if(name.includes("-alola")||name.includes("-galar")||name.includes("-hisui")||name.includes("-paldea")) return name;
  if(name.startsWith("oricorio")) return "oricorio";
  if(name.startsWith("arceus-")) return "arceus";
  if(name==="giratina-origin") return "giratina";
  if(name.endsWith("-mega")) return name.replace("-mega","");
  const removeSuffixes = ["-origin","-therian","-resolute","-pirouette","-eternal","-blade","-base","-average","-school","-dusk","-dawn","-midday","-ice","-fire","-water","-grass","-rock","-fighting","-flying","-ghost","-dark","-fairy","-dragon","-bug","-ground","-poison","-psychic","-steel","-electric","-normal"];
  for(const suf of removeSuffixes) if(name.endsWith(suf)) return name.replace(suf,"");
  return name;
}

document.addEventListener('DOMContentLoaded', async () => {
  const container = document.getElementById('pokemonContainer');
  const params = new URLSearchParams(window.location.search);
  const file = params.get('file') || 'allowlist_Starters.json';

  try{
    const res = await fetch(file);
    if(!res.ok) throw new Error('Arquivo n√£o encontrado: '+res.statusText);
    const data = await res.json();
    const entries = Object.entries(data);
    if(entries.length===0){ container.innerHTML='<p>Nenhum item encontrado no JSON.</p>'; return; }

    entries.forEach(([key,info])=>{
      const namePretty = prettifyKey(key);
      const smogonName = normalizeName(key);
      const smogonUrl = `https://www.smogon.com/dex/ss/pokemon/${smogonName}`;
      const localImgPath = `img/${encodeURIComponent(key)}.png`;
      const fallbackRemote = info && info.sprite ? info.sprite : '';

      const card = document.createElement('a');
      card.className='card';
      card.href=smogonUrl;
      card.target="_blank";
      card.rel="noopener";

      const img = document.createElement('img');
      img.alt=namePretty;
      img.loading='lazy';
      img.src=localImgPath;
      img.onerror=function(){
        this.onerror=null;
        this.src=fallbackRemote || 'data:image/svg+xml;utf8,'+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><rect fill="#2E2D2D" width="100%" height="100%"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#999" font-size="14">no image</text></svg>');
      };

      const cardText = document.createElement('div');
      cardText.className='card-text';
      const h2 = document.createElement('h2');
      h2.textContent=namePretty;
      cardText.appendChild(h2);

      card.appendChild(img);
      card.appendChild(cardText);
      container.appendChild(card);
    });
  }catch(err){
    container.innerHTML=`<p><strong>Erro:</strong> n√£o foi poss√≠vel carregar <code>${file}</code>. ${err.message}</p>`;
    console.error(err);
  }
});
</script>

</body>
</html>
